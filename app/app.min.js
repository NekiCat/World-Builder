/// <reference path="../typings/index.d.ts" />
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
var WorldBuilder
!function(r){var e
!function(r){function e(r,e,t,o){angular.module("WorldBuilder").config(["$routeProvider",function(e){e.when(t,{templateUrl:o,controller:r})}]).controller(r,e)}function t(r,e){for(var t=new e,o=0,i=t.name;r.filter(function(r){return r.name.toLowerCase()==i.toLowerCase()}).length>0;)i=t.name+" ("+ ++o+")"
t.name=i,r.push(t)}function o(r,e,t){var o=r.indexOf(e)
o>-1&&confirm(t.replace("{0}",e.name))&&(r=r.splice(o,1))}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=16*Math.random()|0,t="x"==r?e:3&e|8
return t.toString(16)})}r.registerAngularController=e,r.insertNameable=t,r.removeConfirmed=o,r.createGUID=i}(e=r.Util||(r.Util={})),angular.module("WorldBuilder",["ngRoute","ngStorage"]).config(["$locationProvider","$routeProvider",function(r,e){r.hashPrefix("!"),e.otherwise({redirectTo:"/projects"})}]).filter("escape",["$window",function(r){return r.encodeURIComponent}]).directive("wbClickOff",["$parse","$document",function(r,e){return{compile:function(t,o){var i=r(o.wbClickOff)
return function(r,t,o){t.bind("click",function(r){r.stopPropagation()}),angular.element(e[0].body).bind("click",function(e){r.$apply(function(){i(r,{$event:e})})})}}}}]).directive("wbEnter",function(){return function(r,e,t){e.bind("keydown keypress",function(e){console.log("keycode = %d",e.which),13===e.which&&(r.$apply(function(){r.$eval(t.wbEnter,{event:e})}),e.preventDefault())})}})}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Character"}return e}()
r.Character=e}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Event"}return e}()
r.Event=e}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Location"}return e}()
r.Location=e}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(){}return r}()
r.Icon=e
var t=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Project",this.characters=[],this.locations=[],this.events=[],this.terms=[]}return e}()
r.Project=t}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Term"}return e}()
r.Term=e}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e
!function(r){function e(r,e,t){void 0===e&&(e=0),void 0===t&&(t=0)
var o
Array.isArray(r)?(o=r[0],e=r[1],t=r[2]):o=r
var i,n,c=Math.max(o,e,t),l=Math.min(o,e,t),s=(c+l)/2
if(c===l)i=n=0
else{var a=c-l
switch(n=s>.5?a/(2-c-l):a/(c+l),c){case o:i=(e-t)/a+(e<t?6:0)
break
case e:i=(t-o)/a+2
break
case t:i=(o-e)/a+4}i/=6}return[i,n,s]}function t(r,e,t){void 0===e&&(e=0),void 0===t&&(t=0)
var o
Array.isArray(r)?(o=r[0],e=r[1],t=r[2]):o=r
var i,n,c
if(0===e)i=n=c=0
else{var l=function(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r},s=t<.5?t*(1+e):t+e-t*e,a=2*t-s
i=l(a,s,o+1/3),n=l(a,s,o),c=l(a,s,o-1/3)}return[255*i,255*n,255*c]}r.rgbToHsl=e,r.hslToRgb=t}(e=r.Util||(r.Util={}))}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t,o){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0],this.$scope.project||o.path("/projects")}return r.$inject=["$scope","$localStorage","$routeParams","$location"],r}()
r.CharacterListController=e,r.Util.registerAngularController("CharacterListController",e,"/projects/:project/characters","views/characterList/characterList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t,o){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0],this.$scope.project||o.path("/projects")}return r.$inject=["$scope","$localStorage","$routeParams","$location"],r}()
r.EventListController=e,r.Util.registerAngularController("EventListController",e,"/projects/:project/events","views/eventList/eventList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t,o){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0],this.$scope.project||o.path("/projects")}return r.$inject=["$scope","$localStorage","$routeParams","$location"],r}()
r.LocationListController=e,r.Util.registerAngularController("LocationListController",e,"/projects/:project/locations","views/locationList/locationList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t,o){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0],this.$scope.project||o.path("/projects")}return r.$inject=["$scope","$localStorage","$routeParams","$location"],r}()
r.ProjectController=e,r.Util.registerAngularController("ProjectController",e,"/projects/:project","views/project/project.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(r,e){var t=this
this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.createProject=function(){return t.createProject.call(t)},this.$scope.deleteProject=function(r){return t.deleteProject.call(t,r)}}return e.prototype.createProject=function(){r.Util.insertNameable(this.$scope.$storage.projects,r.Project)},e.prototype.deleteProject=function(e){r.Util.removeConfirmed(this.$scope.$storage.projects,e,"Do you really want to delete '{0}'? This cannot be undone!")},e.$inject=["$scope","$localStorage"],e}()
r.ProjectListController=e,r.Util.registerAngularController("ProjectListController",e,"/projects","views/projectList/projectList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t,o){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0],this.$scope.project||o.path("/projects")}return r.$inject=["$scope","$localStorage","$routeParams","$location"],r}()
r.TermListController=e,r.Util.registerAngularController("TermListController",e,"/projects/:project/terms","views/termList/termList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t,o){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0],this.$scope.project||o.path("/projects")}return r.$inject=["$scope","$localStorage","$routeParams","$location"],r}()
r.TimelineController=e,r.Util.registerAngularController("TimelineController",e,"/projects/:project/timeline","views/timeline/timeline.html")}(WorldBuilder||(WorldBuilder={}))
