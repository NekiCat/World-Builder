/// <reference path="../typings/index.d.ts" />
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
var WorldBuilder
!function(r){var e
!function(r){function e(r,e,t){var o=r.indexOf(e)
o>-1&&confirm(t.replace("{0}",e.name))&&(r=r.splice(o,1))}function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=16*Math.random()|0,t="x"==r?e:3&e|8
return t.toString(16)})}r.removeConfirmed=e,r.createGUID=t}(e=r.Util||(r.Util={})),angular.module("WorldBuilder",["ngRoute","ngStorage"]).config(["$locationProvider","$routeProvider",function(r,e){r.hashPrefix("!"),e.otherwise({redirectTo:"/projects"})}]).filter("escape",["$window",function(r){return r.encodeURIComponent}]).directive("wbClickOff",["$parse","$document",function(r,e){return{compile:function(t,o){var n=r(o.wbClickOff)
return function(r,t,o){t.bind("click",function(r){r.stopPropagation()}),angular.element(e[0].body).bind("click",function(e){r.$apply(function(){n(r,{$event:e})})})}}}}]).directive("wbEnter",function(){return function(r,e,t){e.bind("keydown keypress",function(e){console.log("keycode = %d",e.which),13===e.which&&(r.$apply(function(){r.$eval(t.wbEnter,{event:e})}),e.preventDefault())})}})}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Character"}return e}()
r.Character=e}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Event"}return e}()
r.Event=e}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Location"}return e}()
r.Location=e}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(){}return r}()
r.Icon=e
var t=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Project",this.characters=[],this.locations=[],this.events=[],this.terms=[]}return e}()
r.Project=t}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(){this.guid=r.Util.createGUID(),this.name="New Term"}return e}()
r.Term=e}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0]}return r.$inject=["$scope","$localStorage","$routeParams"],r}()
r.CharacterListController=e,angular.module("WorldBuilder").config(["$routeProvider",function(r){r.when("/projects/:project/characters",{templateUrl:"views/characterList/characterList.html",controller:"CharacterListController"})}]).controller("CharacterListController",e)}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0]}return r.$inject=["$scope","$localStorage","$routeParams"],r}()
r.EventListController=e,angular.module("WorldBuilder").config(["$routeProvider",function(r){r.when("/projects/:project/events",{templateUrl:"views/eventList/eventList.html",controller:"EventListController"})}]).controller("EventListController",e)}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0]}return r.$inject=["$scope","$localStorage","$routeParams"],r}()
r.LocationListController=e,angular.module("WorldBuilder").config(["$routeProvider",function(r){r.when("/projects/:project/locations",{templateUrl:"views/locationList/locationList.html",controller:"LocationListController"})}]).controller("LocationListController",e)}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0]}return r.$inject=["$scope","$localStorage","$routeParams"],r}()
r.ProjectController=e,angular.module("WorldBuilder").config(["$routeProvider",function(r){r.when("/projects/:project",{templateUrl:"views/project/project.html",controller:"ProjectController"})}]).controller("ProjectController",e)}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function e(r,e){var t=this
this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.createProject=function(){return t.createProject.call(t)},this.$scope.deleteProject=function(r){return t.deleteProject.call(t,r)}}return e.prototype.createProject=function(){var e=new r.Project
if(e.name="New Project",this.$scope.$storage.projects.filter(function(r){return"new project"===r.name.toLowerCase()}).length){for(var t=1;this.$scope.$storage.projects.filter(function(r){return r.name.toLowerCase()==="new project ("+t.toString()+")"}).length;)t++
e.name+=" ("+t.toString()+")"}this.$scope.$storage.projects.push(e)},e.prototype.deleteProject=function(e){r.Util.removeConfirmed(this.$scope.$storage.projects,e,"Do you really want to delete '{0}'? This cannot be undone!")},e.$inject=["$scope","$localStorage"],e}()
r.ProjectListController=e,angular.module("WorldBuilder").config(["$routeProvider",function(r){r.when("/projects",{templateUrl:"views/projectList/projectList.html",controller:"ProjectListController"})}]).controller("ProjectListController",e)}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(r){var e=function(){function r(r,e,t){this.$scope=r,this.$scope.$storage=e.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(r){return r.guid===t.project})[0]}return r.$inject=["$scope","$localStorage","$routeParams"],r}()
r.TermListController=e,angular.module("WorldBuilder").config(["$routeProvider",function(r){r.when("/projects/:project/terms",{templateUrl:"views/termList/termList.html",controller:"TermListController"})}]).controller("TermListController",e)}(WorldBuilder||(WorldBuilder={}))
