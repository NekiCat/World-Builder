/// <reference path="../typings/index.d.ts" />
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
/// <reference path="../../../typings/index.d.ts"/>
var WorldBuilder
!function(e){var r
!function(e){function r(e,r,t,o){angular.module("WorldBuilder").config(["$routeProvider",function(r){r.when(t,{templateUrl:o,controller:e})}]).controller(e,r)}function t(e,r){for(var t=new r,o=0,i=t.name;e.filter(function(e){return e.name.toLowerCase()==i.toLowerCase()}).length>0;)i=t.name+" ("+ ++o+")"
t.name=i,e.push(t)}function o(e,r,t){var o=e.indexOf(r)
o>-1&&confirm(t.replace("{0}",r.name))&&(e=e.splice(o,1))}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0,t="x"==e?r:3&r|8
return t.toString(16)})}e.registerAngularController=r,e.insertNameable=t,e.removeConfirmed=o,e.createGUID=i}(r=e.Util||(e.Util={})),angular.module("WorldBuilder",["ngRoute","ngStorage"]).config(["$locationProvider","$routeProvider",function(e,r){e.hashPrefix("!"),r.otherwise({redirectTo:"/projects"})}]).filter("escape",["$window",function(e){return e.encodeURIComponent}]).directive("wbClickOff",["$parse","$document",function(e,r){return{compile:function(t,o){var i=e(o.wbClickOff)
return function(e,t,o){t.bind("click",function(e){e.stopPropagation()}),angular.element(r[0].body).bind("click",function(r){e.$apply(function(){i(e,{$event:r})})})}}}}]).directive("wbEnter",function(){return function(e,r,t){r.bind("keydown keypress",function(r){console.log("keycode = %d",r.which),13===r.which&&(e.$apply(function(){e.$eval(t.wbEnter,{event:r})}),r.preventDefault())})}})}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function r(){this.guid=e.Util.createGUID(),this.name="New Character"}return r}()
e.Character=r}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function r(){this.guid=e.Util.createGUID(),this.name="New Event"}return r}()
e.Event=r}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function r(){this.guid=e.Util.createGUID(),this.name="New Location"}return r}()
e.Location=r}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function e(){}return e}()
e.Icon=r
var t=function(){function r(){this.guid=e.Util.createGUID(),this.name="New Project",this.characters=[],this.locations=[],this.events=[],this.terms=[]}return r}()
e.Project=t}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function r(){this.guid=e.Util.createGUID(),this.name="New Term"}return r}()
e.Term=r}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r
!function(e){function r(e,r,t){void 0===r&&(r=0),void 0===t&&(t=0)
var o
Array.isArray(e)?(o=e[0],r=e[1],t=e[2]):o=e
var i,n,c=Math.max(o,r,t),l=Math.min(o,r,t),s=(c+l)/2
if(c===l)i=n=0
else{var a=c-l
switch(n=s>.5?a/(2-c-l):a/(c+l),c){case o:i=(r-t)/a+(r<t?6:0)
break
case r:i=(t-o)/a+2
break
case t:i=(o-r)/a+4}i/=6}return[i,n,s]}function t(e,r,t){void 0===r&&(r=0),void 0===t&&(t=0)
var o
Array.isArray(e)?(o=e[0],r=e[1],t=e[2]):o=e
var i,n,c
if(0===r)i=n=c=0
else{var l=function(e,r,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?e+6*(r-e)*t:t<.5?r:t<2/3?e+(r-e)*(2/3-t)*6:e},s=t<.5?t*(1+r):t+r-t*r,a=2*t-s
i=l(a,s,o+1/3),n=l(a,s,o),c=l(a,s,o-1/3)}return[255*i,255*n,255*c]}e.rgbToHsl=r,e.hslToRgb=t}(r=e.Util||(e.Util={}))}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function r(r,t,o,i){var n=this
this.$scope=r,this.$scope.$storage=t.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(e){return e.guid===o.project})[0],this.$scope.project||i.path("/projects"),this.$scope.createCharacter=function(){return e.Util.insertNameable(n.$scope.project.characters,e.Character)},this.$scope.deleteCharacter=function(r){return e.Util.removeConfirmed(n.$scope.project.characters,r,"Are you sure you want to delete the character '{0}'? This cannot be undone!")}}return r.$inject=["$scope","$localStorage","$routeParams","$location"],r}()
e.CharacterListController=r,e.Util.registerAngularController("CharacterListController",r,"/projects/:project/characters","views/characterList/characterList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function e(e,r,t,o){this.$scope=e,this.$scope.$storage=r.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(e){return e.guid===t.project})[0],this.$scope.project||o.path("/projects")}return e.$inject=["$scope","$localStorage","$routeParams","$location"],e}()
e.EventListController=r,e.Util.registerAngularController("EventListController",r,"/projects/:project/events","views/eventList/eventList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function e(e,r,t,o){this.$scope=e,this.$scope.$storage=r.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(e){return e.guid===t.project})[0],this.$scope.project||o.path("/projects")}return e.$inject=["$scope","$localStorage","$routeParams","$location"],e}()
e.LocationListController=r,e.Util.registerAngularController("LocationListController",r,"/projects/:project/locations","views/locationList/locationList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function e(e,r,t,o){this.$scope=e,this.$scope.$storage=r.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(e){return e.guid===t.project})[0],this.$scope.project||o.path("/projects")}return e.$inject=["$scope","$localStorage","$routeParams","$location"],e}()
e.ProjectController=r,e.Util.registerAngularController("ProjectController",r,"/projects/:project","views/project/project.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function r(e,r){var t=this
this.$scope=e,this.$scope.$storage=r.$default({projects:[]}),this.$scope.createProject=function(){return t.createProject.call(t)},this.$scope.deleteProject=function(e){return t.deleteProject.call(t,e)}}return r.prototype.createProject=function(){e.Util.insertNameable(this.$scope.$storage.projects,e.Project)},r.prototype.deleteProject=function(r){e.Util.removeConfirmed(this.$scope.$storage.projects,r,"Do you really want to delete '{0}'? This cannot be undone!")},r.$inject=["$scope","$localStorage"],r}()
e.ProjectListController=r,e.Util.registerAngularController("ProjectListController",r,"/projects","views/projectList/projectList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function e(e,r,t,o){this.$scope=e,this.$scope.$storage=r.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(e){return e.guid===t.project})[0],this.$scope.project||o.path("/projects")}return e.$inject=["$scope","$localStorage","$routeParams","$location"],e}()
e.TermListController=r,e.Util.registerAngularController("TermListController",r,"/projects/:project/terms","views/termList/termList.html")}(WorldBuilder||(WorldBuilder={}))
var WorldBuilder
!function(e){var r=function(){function e(e,r,t,o){this.$scope=e,this.$scope.$storage=r.$default({projects:[]}),this.$scope.project=this.$scope.$storage.projects.filter(function(e){return e.guid===t.project})[0],this.$scope.project||o.path("/projects")}return e.$inject=["$scope","$localStorage","$routeParams","$location"],e}()
e.TimelineController=r,e.Util.registerAngularController("TimelineController",r,"/projects/:project/timeline","views/timeline/timeline.html")}(WorldBuilder||(WorldBuilder={}))
